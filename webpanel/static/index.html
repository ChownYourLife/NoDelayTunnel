<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ูพูู NoDelay</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="bg-orb orb-a"></div>
  <div class="bg-orb orb-b"></div>

  <header class="topbar">
    <div>
      <h1 data-i18n="app.title">๐ ูพูู NoDelay</h1>
      <p data-i18n="app.subtitle">ูุงูุชูุฑูฺฏ ููุงุจุนุ ูุถุนุช ุชูููโูุง ู ูุฏุฑุช ุณุฑูุณโูุง</p>
    </div>
    <div class="topbar-actions">
      <label class="lang-switch">
        <span data-i18n="app.lang">๐ ุฒุจุงู</span>
        <select id="langSelect">
          <option value="fa">ูุงุฑุณ</option>
          <option value="en">English</option>
        </select>
      </label>
      <button id="refreshBtn" class="btn" data-i18n="btn.refresh">๐ ุจุฑูุฒุฑุณุงู</button>
      <button id="createBtn" class="btn btn-primary" data-i18n="btn.create_tunnel">โ ุณุงุฎุช ุชููู</button>
    </div>
  </header>

  <main class="layout">
    <section class="card resources">
      <h2 data-i18n="resources.title">๐ ููุงุจุน ุณุฑูุฑ</h2>
      <div class="resource-grid">
        <div class="metric"><label data-i18n="resources.cpu">๐ง CPU</label><strong id="cpuVal">-</strong></div>
        <div class="metric"><label data-i18n="resources.mem">๐งฎ ุญุงูุธู</label><strong id="memVal">-</strong></div>
        <div class="metric"><label data-i18n="resources.disk">๐พ ุฏุณฺฉ</label><strong id="diskVal">-</strong></div>
        <div class="metric"><label data-i18n="resources.load">โ๏ธ Load</label><strong id="loadVal">-</strong></div>
        <div class="metric"><label data-i18n="resources.uptime">โฑ๏ธ ุขูพโุชุงู</label><strong id="uptimeVal">-</strong></div>
        <div class="metric"><label data-i18n="resources.net">๐ก ุชุฑุงูฺฉ ูุฒุจุงู</label><strong id="hostNetVal">-</strong></div>
      </div>
    </section>

    <section class="card tunnels">
      <div class="section-head">
        <h2 data-i18n="tunnels.title">๐ฃ๏ธ ุชูููโูุง</h2>
        <span id="lastUpdated" class="muted">-</span>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th data-i18n="table.service">ุณุฑูุณ</th>
              <th data-i18n="table.role">ููุด</th>
              <th data-i18n="table.status">ูุถุนุช</th>
              <th data-i18n="table.profile_mode">ูพุฑููุงู / ููุฏ</th>
              <th data-i18n="table.endpoints">ุงูุฏูพููุชโูุง</th>
              <th data-i18n="table.throughput">ูุฑุฎ ุนุจูุฑ</th>
              <th data-i18n="table.actions">ุงูุฏุงูุงุช</th>
            </tr>
          </thead>
          <tbody id="tunnelRows"></tbody>
        </table>
      </div>
    </section>

    <section class="card logs">
      <div class="section-head">
        <h2 data-i18n="logs.title">๐ ูุงฺฏโูุง</h2>
        <div>
          <select id="logService"></select>
          <button id="loadLogsBtn" class="btn" data-i18n="btn.load_logs">๐ฅ ุจุงุฑฺฏุฐุงุฑ</button>
        </div>
      </div>
      <pre id="logsBox" class="logs-box" data-i18n="logs.hint">ฺฉ ุชููู ุงูุชุฎุงุจ ฺฉูุฏ ู ูุงฺฏ ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.</pre>
    </section>
  </main>

  <dialog id="createModal" class="modal">
    <form id="createForm" class="modal-body" method="dialog">
      <div class="modal-head">
        <h3 data-i18n="create.title">๐งฉ ุณุงุฎุช ุชููู</h3>
        <button type="button" class="icon-btn" id="closeCreate">โ</button>
      </div>

      <div class="form-grid">
      <label>
        <span data-i18n="form.role">ููุด</span>
          <select name="role">
            <option value="server" data-i18n="role.server">ุณุฑูุฑ</option>
            <option value="client" data-i18n="role.client">ฺฉูุงูุช</option>
          </select>
        </label>
      <label>
        <span data-i18n="form.instance">ุงูุณุชูุณ</span>
          <input name="instance" placeholder="default" data-i18n-placeholder="ph.instance" />
        </label>
      <label>
        <span data-i18n="form.tunnel_mode">ููุฏ ุชููู</span>
          <select name="tunnel_mode">
            <option value="reverse">reverse</option>
            <option value="direct">direct</option>
          </select>
        </label>
      <label>
        <span data-i18n="form.profile">ูพุฑููุงู</span>
          <select name="profile">
            <option value="balanced">balanced</option>
            <option value="performance">performance</option>
            <option value="latency">latency</option>
            <option value="high-load">high-load</option>
            <option value="aggressive">aggressive</option>
            <option value="cpu-efficient">cpu-efficient</option>
            <option value="gaming">gaming</option>
          </select>
        </label>
      <label>
        <span data-i18n="form.transport">ุชุฑูุณูพูุฑุช</span>
          <select name="transport">
            <option value="tcp">tcp</option>
            <option value="tls">tls</option>
            <option value="ws">ws</option>
            <option value="wss">wss</option>
            <option value="kcp">kcp</option>
            <option value="quic">quic</option>
            <option value="httpmimicry">httpmimicry</option>
            <option value="httpsmimicry">httpsmimicry</option>
            <option value="reality">reality</option>
          </select>
        </label>
      <label>
        <span data-i18n="form.port">ูพูุฑุช</span>
          <input name="port" value="9999" />
        </label>
      <label>
        <span data-i18n="form.server_addr">ุขุฏุฑุณ ุณุฑูุฑ (ฺฉูุงูุช)</span>
          <input name="server_addr" placeholder="1.2.3.4" data-i18n-placeholder="ph.server_addr" />
        </label>
      <label>
        <span data-i18n="form.listen_host">Listen Host (ุณุฑูุฑ)</span>
          <input name="listen_host" placeholder="empty = all interfaces" data-i18n-placeholder="ph.listen_host" />
        </label>
      <label>
        <span data-i18n="form.path">ูุณุฑ</span>
          <input name="path" value="/tunnel" />
        </label>
      <label>
        <span data-i18n="form.psk">PSK</span>
          <input name="psk" placeholder="optional" data-i18n-placeholder="ph.psk" />
        </label>
      <label>
        <span data-i18n="form.pool_size">Pool Size (ฺฉูุงูุช)</span>
          <input name="pool_size" value="3" />
        </label>
      <label>
        <span data-i18n="form.strategy">ุงุณุชุฑุงุชฺ (ฺฉูุงูุช)</span>
          <select name="connection_strategy">
            <option value="parallel">parallel</option>
            <option value="priority">priority</option>
          </select>
        </label>
      <label>
        <span data-i18n="form.mux">Mux</span>
          <select name="mux_type">
            <option value="smux">smux</option>
            <option value="yamux">yamux</option>
            <option value="h2mux">h2mux</option>
          </select>
        </label>
      </div>

      <label class="advanced-label">
        <span data-i18n="form.advanced_yaml">YAML ูพุดุฑูุชู (ุงุฎุชุงุฑ)</span>
        <textarea name="config_text" rows="10" data-i18n-placeholder="ph.advanced_yaml" placeholder="If set, this YAML is written directly."></textarea>
      </label>

      <div class="modal-actions">
        <button type="button" class="btn" id="cancelCreate" data-i18n="btn.cancel">ูุบู</button>
        <button type="submit" class="btn btn-primary" data-i18n="btn.create_apply">โ ุงุฌุงุฏ / ุงุนูุงู</button>
      </div>
    </form>
  </dialog>

  <dialog id="editModal" class="modal">
    <form id="editForm" class="modal-body" method="dialog">
      <div class="modal-head">
        <h3 id="editTitle" data-i18n="edit.title">๐ ูุฑุงุด ฺฉุงููฺฏ</h3>
        <button type="button" class="icon-btn" id="closeEdit">โ</button>
      </div>
      <textarea id="editConfigText" rows="18"></textarea>
      <label class="checkbox-row">
        <input type="checkbox" id="editRestart" checked />
        <span data-i18n="edit.restart">ุฑโุงุณุชุงุฑุช ุณุฑูุณ ุจุนุฏ ุงุฒ ุฐุฎุฑู</span>
      </label>
      <div class="modal-actions">
        <button type="button" class="btn" id="cancelEdit" data-i18n="btn.cancel">ูุบู</button>
        <button type="submit" class="btn btn-primary" data-i18n="btn.save">๐พ ุฐุฎุฑู</button>
      </div>
    </form>
  </dialog>

  <div id="toast" class="toast"></div>
  <script src="/app.js"></script>
</body>
</html>
